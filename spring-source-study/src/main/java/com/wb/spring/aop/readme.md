### cglib和jdk动态代理区别

#### 1.使用方式不同
JDK动态代理的前提是被代理的类必须实现了某一个接口，而cglib不需要强制要求被代理类实现接口，可以是接口或者实现类

#### 2.生成字节码的方式不同
JDK动态代理和cglib动态代理都是运行期间为被代理对象生成字节码，JDK是直接操作字节码，而cglib是使用了asm框架操作字节码

#### 3.生成代理的效率不同
JDK生成字节码是直接使用接口，逻辑比较简单，效率稍高。而cglib生成字节码的逻辑比较复杂，所以效率低

#### 4.执行效率不同
JDK调用代理方法时，是需要通过反射调用，而cglib是通过fastClass机制直接调用方法，执行效率更高

### cglib的fastClass机制
cglib执行代理方法的效率比jdk高，是因为cglib采用了fastClass机制，而JDK是通过反射调用的。
fastClass原理是：生成代理类时，为代理类和被代理类各生成一个Class，这个Class会为代理类或者被代理类的方法分配一个int类型的索引index，调用的
时候将这个index当做一个入参，FastClass就可以直接通过索引定位到要调用的方法直接进行调用，所以省略了反射调用，执行效率高于JDK.



























